"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[618],{5618:(R,p,s)=>{s.r(p),s.d(p,{routes:()=>N});var g={};s.r(g),s.d(g,{getUserProfileEffect$:()=>G});var e=s(5879),v=s(6814),c=s(8281),o=s(4221);const u=(0,o.R7)({source:"User Profile",events:{"Get user profile":(0,o.Ky)(),"Get user profile success":(0,o.Ky)(),"Get user profile failure":(0,o.uZ)()}});var Z=s(493);const d={isLoading:!1,error:null,data:null},A=(0,o.Tz)({name:"userProfile",reducer:(0,o.Lq)(d,(0,o.on)(u.getUserProfile,r=>({...r,isLoading:!0})),(0,o.on)(u.getUserProfileSuccess,(r,n)=>({...r,isLoading:!1,data:n.userProfile})),(0,o.on)(u.getUserProfileFailure,r=>({...r,isLoading:!1})),(0,o.on)(Z.hn,()=>d))}),{name:x,reducer:F,selectIsLoading:T,selectError:S,selectData:y}=A;var O=s(4574),C=s(4444);function I(r,n){1&r&&(e.TgZ(0,"a",13),e._UZ(1,"i",14),e.TgZ(2,"span"),e._uU(3,"\xa0 Edit Profile Settings"),e.qZA()())}const Y=function(r){return["/profile",r]},U=function(){return{exact:!0}},E=function(r){return["/profile",r,"favorites"]};function J(r,n){if(1&r&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),e._UZ(5,"img",6),e.TgZ(6,"h4"),e._uU(7),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11," FOLLOW USER BUTTON "),e.YNc(12,I,4,0,"a",7),e.qZA()()()()(),e.TgZ(13,"div",3)(14,"div",4)(15,"div",5)(16,"div",8)(17,"ul",9)(18,"li",10)(19,"a",11),e._uU(20,"My Posts"),e.qZA()(),e.TgZ(21,"li",10)(22,"a",11),e._uU(23,"Favorite Posts"),e.qZA()()()(),e._UZ(24,"app-feed",12),e.qZA()()()()),2&r){const i=e.oxw();let t,l,a,h,L;e.xp6(5),e.Q6J("src",null==(t=i.userProfile())?null:t.image,e.LSH),e.xp6(2),e.Oqu(null==(l=i.userProfile())?null:l.username),e.xp6(2),e.Oqu(null==(a=i.userProfile())?null:a.bio),e.xp6(3),e.Q6J("ngIf",i.isCurrentUserProfile()),e.xp6(7),e.Q6J("routerLink",e.VKq(9,Y,null==(h=i.userProfile())?null:h.username))("routerLinkActiveOptions",e.DdM(11,U)),e.xp6(3),e.Q6J("routerLink",e.VKq(12,E,null==(L=i.userProfile())?null:L.username))("routerLinkActiveOptions",e.DdM(14,U)),e.xp6(2),e.Q6J("apiUrl",i.getApiUrl())}}let K=(()=>{var r;class n{constructor(t,l,a){this.route=t,this.store=l,this.router=a,this.slug="",this.isLoading=this.store.selectSignal(T),this.error=this.store.selectSignal(S),this.userProfile=this.store.selectSignal(y),this.currentUser=this.store.selectSignal(O.HF),this.isCurrentUserProfile=(0,e.Flj)(()=>this.userProfile()?.username===this.currentUser()?.username)}ngOnInit(){this.route.params.subscribe(t=>{this.slug=t.slug,this.fetchUserProfile()})}fetchUserProfile(){this.store.dispatch(u.getUserProfile({slug:this.slug}))}getApiUrl(){return this.router.url.includes("favorites")?`/articles?favorited=${this.slug}`:`/articles?author=${this.slug}`}}return(r=n).\u0275fac=function(t){return new(t||r)(e.Y36(c.gz),e.Y36(o.yh),e.Y36(c.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-profile"]],standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[["class","profile-page",4,"ngIf"],[1,"profile-page"],[1,"user-info"],[1,"container"],[1,"row"],[1,"col-xs-12","col-md-10","offset-md-1"],["alt","User Image",1,"user-img",3,"src"],["class","btn btn-sm btn-outline-secondary action-btn","routerLink","/settings",4,"ngIf"],[1,"articles-toggler"],[1,"nav","nav-pills","outline-active"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],[3,"apiUrl"],["routerLink","/settings",1,"btn","btn-sm","btn-outline-secondary","action-btn"],[1,"ion-gear-a"]],template:function(t,l){1&t&&e.YNc(0,J,25,15,"div",0),2&t&&e.Q6J("ngIf",l.userProfile())},dependencies:[v.ez,v.O5,c.rH,c.Od,C.e],encapsulation:2}),n})();var m=s(7398),M=s(553),Q=s(9862);let P=(()=>{var r;class n{constructor(t){this.http=t}getUserProfile(t){return this.http.get(`${M.N.API_URL}/profiles/${t}`).pipe((0,m.U)(a=>a.profile))}}return(r=n).\u0275fac=function(t){return new(t||r)(e.LFG(Q.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),n})();var f=s(7483),$=s(4664),z=s(6306),D=s(2096);const G=(0,f.GW)((r=(0,e.f3M)(f.eX),n=(0,e.f3M)(P))=>r.pipe((0,f.l4)(u.getUserProfile),(0,$.w)(({slug:i})=>n.getUserProfile(i).pipe((0,m.U)(t=>u.getUserProfileSuccess({userProfile:t})),(0,z.K)(()=>(0,D.of)(u.getUserProfileFailure()))))),{functional:!0}),N=[{path:"",component:K,providers:[P,(0,o.oY)(x,F),(0,f.y3)(g)]}]}}]);