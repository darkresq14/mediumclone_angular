"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[444],{4208:(U,C,l)=>{l.d(C,{H:()=>_});var h=l(6814),c=l(5879);let _=(()=>{var p;class d{constructor(){this.message="Something went wrong"}}return(p=d).\u0275fac=function(m){return new(m||p)},p.\u0275cmp=c.Xpm({type:p,selectors:[["app-error-message"]],inputs:{message:"message"},standalone:!0,features:[c.jDz],decls:2,vars:1,template:function(m,F){1&m&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&m&&(c.xp6(1),c.Oqu(F.message))},dependencies:[h.ez],encapsulation:2}),d})()},4444:(U,C,l)=>{l.d(C,{e:()=>he});var h={};l.r(h),l.d(h,{exclude:()=>ae,extract:()=>Z,parse:()=>v,parseUrl:()=>M,pick:()=>$,stringify:()=>w,stringifyUrl:()=>Q});var c=l(6814),_=l(2594),p=l(2572),d=l(7011),g=l(8281),m=l(4208),F=l(6992),A=l(553),a=l(5879);let z=(()=>{var e;class t{range(n,i){return[...Array(i-n).keys()].map(s=>s+n)}range10(n,i){let s=n-5,o=n+5;return s<1&&(s=1,o=Math.min(s+9,i)),o>i&&(o=i,s=Math.max(o-9,1)),this.range(s,o+1)}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const V=function(e){return{active:e}},E=function(e){return{page:e}};function Y(e,t){if(1&e&&(a.TgZ(0,"li",2)(1,"a",3),a._uU(2),a.qZA()()),2&e){const r=t.$implicit,n=a.oxw();a.Q6J("ngClass",a.VKq(4,V,n.currentPage===r)),a.xp6(1),a.Q6J("routerLink",n.url)("queryParams",a.VKq(6,E,r)),a.xp6(1),a.hij(" ",r," ")}}const L=function(e){return{disabled:e}},B=function(){return{page:1}};let H=(()=>{var e;class t{constructor(n){this.utilsService=n,this.total=0,this.limit=0,this.url="",this.currentPage=1,this.pagesCount=1,this.pages=[]}ngOnInit(){this.pagesCount=Math.ceil(this.total/this.limit),this.pages=this.pagesCount>0?this.utilsService.range10(this.currentPage,this.pagesCount):[]}}return(e=t).\u0275fac=function(n){return new(n||e)(a.Y36(z))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-pagination"]],inputs:{total:"total",limit:"limit",url:"url",currentPage:"currentPage"},standalone:!0,features:[a.jDz],decls:9,vars:14,consts:[[2,"display","flex","justify-content","center","width","100%"],[1,"pagination"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"routerLink","queryParams"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(a.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),a._uU(4," First "),a.qZA()(),a.YNc(5,Y,3,8,"li",4),a.TgZ(6,"li",2)(7,"a",3),a._uU(8," Last "),a.qZA()()()()),2&n&&(a.xp6(2),a.Q6J("ngClass",a.VKq(7,L,1===i.currentPage)),a.xp6(1),a.Q6J("routerLink",i.url)("queryParams",a.DdM(9,B)),a.xp6(2),a.Q6J("ngForOf",i.pages),a.xp6(1),a.Q6J("ngClass",a.VKq(10,L,i.currentPage===i.pagesCount)),a.xp6(1),a.Q6J("routerLink",i.url)("queryParams",a.VKq(12,E,i.pagesCount)))},dependencies:[c.ez,c.mk,c.sg,g.rH],encapsulation:2}),t})();const S="%[a-f0-9]{2}",P=new RegExp("("+S+")|([^%]+?)","gi"),I=new RegExp("("+S+")+","gi");function x(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(1===e.length)return e;const r=e.slice(0,t=t||1),n=e.slice(t);return Array.prototype.concat.call([],x(r),x(n))}function W(e){try{return decodeURIComponent(e)}catch{let t=e.match(P)||[];for(let r=1;r<t.length;r++)t=(e=x(t,r).join("")).match(P)||[];return e}}function j(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===e||""===t)return[];const r=e.indexOf(t);return-1===r?[]:[e.slice(0,r),e.slice(r+t.length)]}function T(e,t){const r={};if(Array.isArray(t))for(const n of t){const i=Object.getOwnPropertyDescriptor(e,n);i?.enumerable&&Object.defineProperty(r,n,i)}else for(const n of Reflect.ownKeys(e)){const i=Object.getOwnPropertyDescriptor(e,n);i.enumerable&&t(n,e[n],e)&&Object.defineProperty(r,n,i)}return r}const G=e=>null==e,ee=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),O=Symbol("encodeFragmentIdentifier");function D(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function f(e,t){return t.encode?t.strict?ee(e):encodeURIComponent(e):e}function y(e,t){return t.decode?function k(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return function X(e){const t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"};let r=I.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{const i=W(r[0]);i!==r[0]&&(t[r[0]]=i)}r=I.exec(e)}t["%C2"]="\ufffd";const n=Object.keys(t);for(const i of n)e=e.replace(new RegExp(i,"g"),t[i]);return e}(e)}}(e):e}function N(e){return Array.isArray(e)?e.sort():"object"==typeof e?N(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function b(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function J(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function Z(e){const t=(e=b(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function v(e,t){D((t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t}).arrayFormatSeparator);const r=function te(e){let t;switch(e.arrayFormat){case"index":return(r,n,i)=>{t=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),t?(void 0===i[r]&&(i[r]={}),i[r][t[1]]=n):i[r]=n};case"bracket":return(r,n,i)=>{t=/(\[])$/.exec(r),i[r=r.replace(/\[]$/,"")]=t?void 0!==i[r]?[...i[r],n]:[n]:n};case"colon-list-separator":return(r,n,i)=>{t=/(:list)$/.exec(r),i[r=r.replace(/:list$/,"")]=t?void 0!==i[r]?[...i[r],n]:[n]:n};case"comma":case"separator":return(r,n,i)=>{const s="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!s&&y(n,e).includes(e.arrayFormatSeparator);n=o?y(n,e):n;const u=s||o?n.split(e.arrayFormatSeparator).map(Fe=>y(Fe,e)):null===n?n:y(n,e);i[r]=u};case"bracket-separator":return(r,n,i)=>{const s=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!s)return void(i[r]=n&&y(n,e));const o=null===n?[]:n.split(e.arrayFormatSeparator).map(u=>y(u,e));i[r]=void 0!==i[r]?[...i[r],...o]:o};default:return(r,n,i)=>{i[r]=void 0!==i[r]?[...[i[r]].flat(),n]:n}}}(t),n=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const i of e.split("&")){if(""===i)continue;const s=t.decode?i.replace(/\+/g," "):i;let[o,u]=j(s,"=");void 0===o&&(o=s),u=void 0===u?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?u:y(u,t),r(y(o,t),u,n)}for(const[i,s]of Object.entries(n))if("object"==typeof s&&null!==s)for(const[o,u]of Object.entries(s))s[o]=J(u,t);else n[i]=J(s,t);return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((i,s)=>{const o=n[s];return i[s]=o&&"object"==typeof o&&!Array.isArray(o)?N(o):o,i},Object.create(null))}function w(e,t){if(!e)return"";D((t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t}).arrayFormatSeparator);const r=o=>t.skipNull&&G(e[o])||t.skipEmptyString&&""===e[o],n=function re(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const i=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[f(t,e),"[",i,"]"].join("")]:[...r,[f(t,e),"[",f(i,e),"]=",f(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[f(t,e),"[]"].join("")]:[...r,[f(t,e),"[]=",f(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[f(t,e),":list="].join("")]:[...r,[f(t,e),":list=",f(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:(i=null===i?"":i,0===n.length?[[f(r,e),t,f(i,e)].join("")]:[[n,f(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,f(t,e)]:[...r,[f(t,e),"=",f(n,e)].join("")]}}(t),i={};for(const[o,u]of Object.entries(e))r(o)||(i[o]=u);const s=Object.keys(i);return!1!==t.sort&&s.sort(t.sort),s.map(o=>{const u=e[o];return void 0===u?"":null===u?f(o,t):Array.isArray(u)?0===u.length&&"bracket-separator"===t.arrayFormat?f(o,t)+"[]":u.reduce(n(o),[]).join("&"):f(o,t)+"="+f(u,t)}).filter(o=>o.length>0).join("&")}function M(e,t){t={decode:!0,...t};let[r,n]=j(e,"#");return void 0===r&&(r=e),{url:r?.split("?")?.[0]??"",query:v(Z(e),t),...t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:y(n,t)}:{}}}function Q(e,t){t={encode:!0,strict:!0,[O]:!0,...t};const r=b(e.url).split("?")[0]||"";let s=w({...v(Z(e.url),{sort:!1}),...e.query},t);s&&(s=`?${s}`);let o=function ne(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);if(e.fragmentIdentifier){const u=new URL(r);u.hash=e.fragmentIdentifier,o=t[O]?u.hash:`#${e.fragmentIdentifier}`}return`${r}${s}${o}`}function $(e,t,r){r={parseFragmentIdentifier:!0,[O]:!1,...r};const{url:n,query:i,fragmentIdentifier:s}=M(e,r);return Q({url:n,query:T(i,t),fragmentIdentifier:s},r)}function ae(e,t,r){return $(e,Array.isArray(t)?i=>!t.includes(i):(i,s)=>!t(i,s),r)}const q=h;var ie=l(7232),se=l(6148),oe=l(4574),K=l(4221);const ce=function(e,t){return{btn:!0,"btn-sm":!0,"btn-primary":e,"btn-outline-primary":t}};let le=(()=>{var e;class t{constructor(n,i){this.store=n,this.router=i,this.isFavorited=!1,this.favoritesCount=0,this.articleSlug="",this.currentUser=this.store.selectSignal(oe.HF)}handleLike(){this.currentUser()?(this.store.dispatch(se.p.addToFavorites({isFavorited:this.isFavorited,slug:this.articleSlug})),this.isFavorited?this.favoritesCount--:this.favoritesCount++,this.isFavorited=!this.isFavorited):this.router.navigateByUrl("/login")}}return(e=t).\u0275fac=function(n){return new(n||e)(a.Y36(K.yh),a.Y36(g.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-add-to-favorites"]],inputs:{isFavorited:"isFavorited",favoritesCount:"favoritesCount",articleSlug:"articleSlug"},standalone:!0,features:[a.jDz],decls:4,vars:5,consts:[[3,"ngClass","click"],[1,"ion-heart"]],template:function(n,i){1&n&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return i.handleLike()}),a._UZ(1,"i",1),a.TgZ(2,"span"),a._uU(3),a.qZA()()),2&n&&(a.Q6J("ngClass",a.WLB(2,ce,i.isFavorited,!i.isFavorited)),a.xp6(3),a.hij("\xa0 ",i.favoritesCount,""))},dependencies:[c.ez,c.mk],encapsulation:2}),t})();function ue(e,t){1&e&&(a.TgZ(0,"app-loading"),a._uU(1,"Loading..."),a.qZA())}function fe(e,t){if(1&e&&a._UZ(0,"app-error-message",2),2&e){const r=a.oxw().ngIf;a.Q6J("message",r.error)}}const R=function(e){return["/profile",e]},de=function(e){return["/articles",e]};function ge(e,t){if(1&e&&(a.TgZ(0,"div",5)(1,"div",6)(2,"a",7),a._UZ(3,"img",8),a.qZA(),a.TgZ(4,"div",9)(5,"a",7),a._uU(6),a.qZA(),a.TgZ(7,"span",10),a._uU(8),a.ALo(9,"date"),a.qZA()(),a.TgZ(10,"div",11),a._UZ(11,"app-add-to-favorites",12),a.qZA()(),a.TgZ(12,"a",13)(13,"h1"),a._uU(14),a.qZA(),a.TgZ(15,"p"),a._uU(16),a.qZA(),a.TgZ(17,"span"),a._uU(18,"Read more..."),a.qZA(),a._UZ(19,"app-tag-list",14),a.qZA()()),2&e){const r=t.$implicit;a.xp6(2),a.Q6J("routerLink",a.VKq(14,R,r.author.username)),a.xp6(1),a.Q6J("src",r.author.image,a.LSH),a.xp6(2),a.Q6J("routerLink",a.VKq(16,R,r.author.username)),a.xp6(1),a.hij(" ",r.author.username," "),a.xp6(2),a.Oqu(a.lcZ(9,12,r.createdAt)),a.xp6(3),a.Q6J("isFavorited",r.favorited)("favoritesCount",r.favoritesCount)("articleSlug",r.slug),a.xp6(1),a.Q6J("routerLink",a.VKq(18,de,r.slug)),a.xp6(2),a.Oqu(r.title),a.xp6(2),a.Oqu(r.description),a.xp6(3),a.Q6J("tags",r.tagList)}}function pe(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,ge,20,20,"div",3),a._UZ(2,"app-pagination",4),a.qZA()),2&e){const r=a.oxw().ngIf,n=a.oxw();a.xp6(1),a.Q6J("ngForOf",r.feed.articles),a.xp6(1),a.Q6J("total",r.feed.articlesCount)("limit",n.limit)("url",n.baseUrl)("currentPage",n.currentPage)}}function me(e,t){if(1&e&&(a.ynx(0),a.YNc(1,ue,2,0,"app-loading",0),a.YNc(2,fe,1,1,"app-error-message",1),a.YNc(3,pe,3,5,"div",0),a.BQk()),2&e){const r=t.ngIf;a.xp6(1),a.Q6J("ngIf",r.isLoading),a.xp6(1),a.Q6J("ngIf",r.error),a.xp6(1),a.Q6J("ngIf",r.feed)}}let he=(()=>{var e;class t{constructor(n,i,s){this.store=n,this.router=i,this.route=s,this.apiUrl="",this.data$=(0,p.a)({isLoading:this.store.select(d.xU),error:this.store.select(d.zh),feed:this.store.select(d.up)}),this.limit=A.N.limit,this.baseUrl=this.router.url.split("?")[0],this.currentPage=1}ngOnInit(){this.route.queryParams.subscribe(n=>{this.currentPage=Number(n.page||"1"),this.fetchFeed()})}ngOnChanges(n){!n.apiUrl.firstChange&&n.apiUrl.currentValue!==n.apiUrl.previousValue&&this.fetchFeed()}fetchFeed(){const n=this.currentPage*this.limit-this.limit,i=q.parseUrl(this.apiUrl),s=q.stringify({limit:this.limit,offset:n,...i.query});this.store.dispatch(_.I.getFeed({url:`${i.url}?${s}`}))}}return(e=t).\u0275fac=function(n){return new(n||e)(a.Y36(K.yh),a.Y36(g.F0),a.Y36(g.gz))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-feed"]],inputs:{apiUrl:"apiUrl"},standalone:!0,features:[a.TTD,a.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"message",4,"ngIf"],[3,"message"],["class","article-preview",4,"ngFor","ngForOf"],[3,"total","limit","url","currentPage"],[1,"article-preview"],[1,"article-meta"],[3,"routerLink"],[3,"src"],[1,"info"],[1,"date"],[1,"pull-xs-right"],[3,"isFavorited","favoritesCount","articleSlug"],[1,"preview-link",3,"routerLink"],[3,"tags"]],template:function(n,i){1&n&&(a.YNc(0,me,4,3,"ng-container",0),a.ALo(1,"async")),2&n&&a.Q6J("ngIf",a.lcZ(1,1,i.data$))},dependencies:[c.ez,c.sg,c.O5,c.Ov,c.uU,g.rH,m.H,F.N,H,ie.J,le],encapsulation:2}),t})()},6992:(U,C,l)=>{l.d(C,{N:()=>_});var h=l(6814),c=l(5879);let _=(()=>{var p;class d{}return(p=d).\u0275fac=function(m){return new(m||p)},p.\u0275cmp=c.Xpm({type:p,selectors:[["app-loading"]],standalone:!0,features:[c.jDz],decls:2,vars:0,template:function(m,F){1&m&&(c.TgZ(0,"div"),c._uU(1,"Loading..."),c.qZA())},dependencies:[h.ez],encapsulation:2}),d})()},7232:(U,C,l)=>{l.d(C,{J:()=>p});var h=l(6814),c=l(5879);function _(d,g){if(1&d&&(c.TgZ(0,"li",2),c._uU(1),c.qZA()),2&d){const m=g.$implicit;c.xp6(1),c.hij(" ",m," ")}}let p=(()=>{var d;class g{constructor(){this.tags=[]}}return(d=g).\u0275fac=function(F){return new(F||d)},d.\u0275cmp=c.Xpm({type:d,selectors:[["app-tag-list"]],inputs:{tags:"tags"},standalone:!0,features:[c.jDz],decls:2,vars:1,consts:[[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"]],template:function(F,A){1&F&&(c.TgZ(0,"ul",0),c.YNc(1,_,2,1,"li",1),c.qZA()),2&F&&(c.xp6(1),c.Q6J("ngForOf",A.tags))},dependencies:[h.ez,h.sg],encapsulation:2}),g})()}}]);