"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[737],{8737:(h,m,n)=>{n.r(m),n.d(m,{routes:()=>b});var d={};n.r(d),n.d(d,{deleteArticleEffect$:()=>q,getArticleEffect$:()=>V,redirectAfterDeleteEffect$:()=>w});var r=n(6814),s=n(4221);const o=(0,s.R7)({source:"article",events:{"Get article":(0,s.Ky)(),"Get article success":(0,s.Ky)(),"Get article failure":(0,s.uZ)(),"Delete article":(0,s.Ky)(),"Delete article success":(0,s.uZ)(),"Delete article failure":(0,s.uZ)()}});var c=n(8281),g=n(2572),l=n(2181),p=n(7398),Z=n(493);const L={isLoading:!1,error:null,data:null},M=(0,s.Tz)({name:"article",reducer:(0,s.Lq)(L,(0,s.on)(o.getArticle,e=>({...e,isLoading:!0})),(0,s.on)(o.getArticleSuccess,(e,i)=>({...e,isLoading:!1,data:i.article})),(0,s.on)(o.getArticleFailure,e=>({...e,isLoading:!1})),(0,s.on)(Z.hn,()=>L))}),{name:D,reducer:O,selectIsLoading:y,selectError:F,selectData:T}=M;var J=n(4574),K=n(6992),Q=n(4208),P=n(7232),t=n(5879);const $=function(e){return["/articles",e,"edit"]};function N(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"span")(1,"a",14),t._UZ(2,"i",15),t._uU(3,"Edit Article "),t.qZA(),t.TgZ(4,"button",16),t.NdJ("click",function(){t.CHM(a);const A=t.oxw(3);return t.KtG(A.deleteArticle())}),t._uU(5," Delete Article "),t.qZA()()}if(2&e){const a=t.oxw(2).ngIf;t.xp6(1),t.Q6J("routerLink",t.VKq(1,$,a.article.slug))}}const x=function(e){return["/profiles",e]};function z(e,i){if(1&e&&(t.TgZ(0,"div",7)(1,"h1"),t._uU(2),t.qZA(),t.TgZ(3,"div",8)(4,"a",9),t._UZ(5,"img",10),t.qZA(),t.TgZ(6,"div",11)(7,"a",12),t._uU(8),t.qZA(),t.TgZ(9,"span",13),t._uU(10),t.ALo(11,"date"),t.qZA()(),t.YNc(12,N,6,3,"span",0),t.qZA()()),2&e){const a=t.oxw().ngIf;t.xp6(2),t.Oqu(a.article.title),t.xp6(2),t.Q6J("routerLink",t.VKq(9,x,a.article.author.username)),t.xp6(1),t.Q6J("src",a.article.author.image,t.LSH),t.xp6(2),t.Q6J("routerLink",t.VKq(11,x,a.article.author.username)),t.xp6(1),t.hij(" ",a.article.author.username," "),t.xp6(2),t.Oqu(t.lcZ(11,7,a.article.createdAt)),t.xp6(2),t.Q6J("ngIf",a.isAuthor)}}function Y(e,i){1&e&&(t.TgZ(0,"app-loading"),t._uU(1,"Loading..."),t.qZA())}function S(e,i){if(1&e&&t._UZ(0,"app-error-message",17),2&e){const a=t.oxw().ngIf;t.Q6J("message",a.error)}}function R(e,i){if(1&e&&(t.TgZ(0,"div",18)(1,"div",19)(2,"div")(3,"p"),t._uU(4),t.qZA()(),t._UZ(5,"app-tag-list",20),t.qZA()()),2&e){const a=t.oxw().ngIf;t.xp6(4),t.Oqu(a.article.body),t.xp6(1),t.Q6J("tags",a.article.tagList)}}function W(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,z,13,13,"div",3),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,Y,2,0,"app-loading",0),t.YNc(6,S,1,1,"app-error-message",5),t.YNc(7,R,6,2,"div",6),t.qZA()(),t.BQk()),2&e){const a=i.ngIf;t.xp6(3),t.Q6J("ngIf",a.article),t.xp6(2),t.Q6J("ngIf",a.isLoading),t.xp6(1),t.Q6J("ngIf",a.error),t.xp6(1),t.Q6J("ngIf",a.article)}}let B=(()=>{var e;class i{constructor(u,A){this.store=u,this.route=A,this.slug=this.route.snapshot.paramMap.get("slug")??"",this.isAuthor$=(0,g.a)({article:this.store.select(T),currentUser:this.store.select(J.HF).pipe((0,l.h)(v=>void 0!==v))}).pipe((0,p.U)(({article:v,currentUser:I})=>!(!v||!I)&&v.author.username===I.username)),this.data$=(0,g.a)({isLoading:this.store.select(y),error:this.store.select(F),article:this.store.select(T),isAuthor:this.isAuthor$})}ngOnInit(){this.store.dispatch(o.getArticle({slug:this.slug}))}deleteArticle(){this.store.dispatch(o.deleteArticle({slug:this.slug}))}}return(e=i).\u0275fac=function(u){return new(u||e)(t.Y36(s.yh),t.Y36(c.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-article"]],standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[1,"article-page"],[1,"banner"],["class","container",4,"ngIf"],[1,"container","page"],[3,"message",4,"ngIf"],["class","row artiocle-content",4,"ngIf"],[1,"container"],[1,"article-meta"],[3,"routerLink"],["alt","Author Image",3,"src"],[1,"info"],[1,"author",3,"routerLink"],[1,"date"],[1,"btn","btn-outline-secondary","btn-sm",3,"routerLink"],[1,"ion-edit"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[3,"message"],[1,"row","artiocle-content"],[1,"col-xs-12"],[3,"tags"]],template:function(u,A){1&u&&(t.YNc(0,W,8,4,"ng-container",0),t.ALo(1,"async")),2&u&&t.Q6J("ngIf",t.lcZ(1,1,A.data$))},dependencies:[r.ez,r.O5,r.Ov,r.uU,c.rH,K.N,Q.H,P.J],encapsulation:2}),i})();var f=n(7483),C=n(4664),E=n(6306),U=n(2096),G=n(9397),j=n(5157),X=n(553),H=n(9862);let _=(()=>{var e;class i{constructor(u){this.http=u}deleteArticle(u){return this.http.delete(`${X.N.API_URL}/articles/${u}`)}}return(e=i).\u0275fac=function(u){return new(u||e)(t.LFG(H.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),i})();const V=(0,f.GW)((e=(0,t.f3M)(f.eX),i=(0,t.f3M)(j.n))=>e.pipe((0,f.l4)(o.getArticle),(0,C.w)(({slug:a})=>i.getArticle(a).pipe((0,p.U)(u=>o.getArticleSuccess({article:u})),(0,E.K)(()=>(0,U.of)(o.getArticleFailure()))))),{functional:!0}),q=(0,f.GW)((e=(0,t.f3M)(f.eX),i=(0,t.f3M)(_))=>e.pipe((0,f.l4)(o.deleteArticle),(0,C.w)(({slug:a})=>i.deleteArticle(a).pipe((0,p.U)(()=>o.deleteArticleSuccess()),(0,E.K)(()=>(0,U.of)(o.deleteArticleFailure()))))),{functional:!0}),w=(0,f.GW)((e=(0,t.f3M)(f.eX),i=(0,t.f3M)(c.F0))=>e.pipe((0,f.l4)(o.deleteArticleSuccess),(0,G.b)(()=>{i.navigateByUrl("/")})),{functional:!0,dispatch:!1}),b=[{path:"",component:B,providers:[(0,s.oY)(D,O),(0,f.y3)(d),_]}]},4208:(h,m,n)=>{n.d(m,{H:()=>s});var d=n(6814),r=n(5879);let s=(()=>{var o;class c{constructor(){this.message="Something went wrong"}}return(o=c).\u0275fac=function(l){return new(l||o)},o.\u0275cmp=r.Xpm({type:o,selectors:[["app-error-message"]],inputs:{message:"message"},standalone:!0,features:[r.jDz],decls:2,vars:1,template:function(l,p){1&l&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&l&&(r.xp6(1),r.Oqu(p.message))},dependencies:[d.ez],encapsulation:2}),c})()},6992:(h,m,n)=>{n.d(m,{N:()=>s});var d=n(6814),r=n(5879);let s=(()=>{var o;class c{}return(o=c).\u0275fac=function(l){return new(l||o)},o.\u0275cmp=r.Xpm({type:o,selectors:[["app-loading"]],standalone:!0,features:[r.jDz],decls:2,vars:0,template:function(l,p){1&l&&(r.TgZ(0,"div"),r._uU(1,"Loading..."),r.qZA())},dependencies:[d.ez],encapsulation:2}),c})()},7232:(h,m,n)=>{n.d(m,{J:()=>o});var d=n(6814),r=n(5879);function s(c,g){if(1&c&&(r.TgZ(0,"li",2),r._uU(1),r.qZA()),2&c){const l=g.$implicit;r.xp6(1),r.hij(" ",l," ")}}let o=(()=>{var c;class g{constructor(){this.tags=[]}}return(c=g).\u0275fac=function(p){return new(p||c)},c.\u0275cmp=r.Xpm({type:c,selectors:[["app-tag-list"]],inputs:{tags:"tags"},standalone:!0,features:[r.jDz],decls:2,vars:1,consts:[[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"]],template:function(p,Z){1&p&&(r.TgZ(0,"ul",0),r.YNc(1,s,2,1,"li",1),r.qZA()),2&p&&(r.xp6(1),r.Q6J("ngForOf",Z.tags))},dependencies:[d.ez,d.sg],encapsulation:2}),g})()}}]);