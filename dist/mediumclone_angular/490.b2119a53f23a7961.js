"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[490],{1490:(Y,A,c)=>{c.r(A),c.d(A,{routes:()=>U});var u={};c.r(u),c.d(u,{createArticleEffect$:()=>G,redirectAfterCreateEffect$:()=>N});var f=c(6814),g=c(5257),C=c(2572),i=c(4221);const s=(0,i.R7)({source:"create article",events:{"Create article":(0,i.Ky)(),"Create article success":(0,i.Ky)(),"Create article failure":(0,i.Ky)()}});var h=c(493);const p={isSubmitting:!1,validationErrors:null},S=(0,i.Tz)({name:"createArticle",reducer:(0,i.Lq)(p,(0,i.on)(s.createArticle,e=>({...e,isSubmitting:!0})),(0,i.on)(s.createArticleSuccess,e=>({...e,isSubmitting:!1})),(0,i.on)(s.createArticleFailure,(e,a)=>({...e,isSubmitting:!1,validationErrors:a.errors})),(0,i.on)(h.hn,()=>p))}),{name:y,reducer:E,selectIsSubmitting:F,selectValidationErrors:x}=S;var t=c(5879);function K(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-article-form",1),t.NdJ("articleSubmit",function(l){t.CHM(n);const m=t.oxw();return t.KtG(m.onSubmit(l))}),t.qZA(),t.BQk()}if(2&e){const n=a.ngIf,r=t.oxw();t.xp6(1),t.Q6J("initialValues",r.initialValues)("isSubmitting",n.isSubmitting)("errors",n.backendErrors)}}let L=(()=>{var e;class a{constructor(r){this.store=r,this.initialValues={title:"",description:"",body:"",tagList:[]},this.data$=(0,C.a)({isSubmitting:this.store.select(F),backendErrors:this.store.select(x)})}onSubmit(r){this.store.dispatch(s.createArticle({request:{article:r}}))}}return(e=a).\u0275fac=function(r){return new(r||e)(t.Y36(i.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-create-article"]],standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"initialValues","isSubmitting","errors","articleSubmit"]],template:function(r,l){1&r&&(t.YNc(0,K,2,3,"ng-container",0),t.ALo(1,"async")),2&r&&t.Q6J("ngIf",t.lcZ(1,1,l.data$))},dependencies:[f.ez,f.O5,f.Ov,g.E],encapsulation:2}),a})();var M=c(8281),o=c(7483),$=c(4664),v=c(7398),I=c(6306),T=c(2096),V=c(9397),b=c(553),z=c(9862);let d=(()=>{var e;class a{constructor(r){this.http=r}createArticle(r){return this.http.post(b.N.API_URL+"/articles",r).pipe((0,v.U)(m=>m.article))}}return(e=a).\u0275fac=function(r){return new(r||e)(t.LFG(z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),a})();const G=(0,o.GW)((e=(0,t.f3M)(o.eX),a=(0,t.f3M)(d))=>e.pipe((0,o.l4)(s.createArticle),(0,$.w)(({request:n})=>a.createArticle(n).pipe((0,v.U)(r=>s.createArticleSuccess({article:r})),(0,I.K)(r=>(0,T.of)(s.createArticleFailure({errors:r.error.errors})))))),{functional:!0}),N=(0,o.GW)((e=(0,t.f3M)(o.eX),a=(0,t.f3M)(M.F0))=>e.pipe((0,o.l4)(s.createArticleSuccess),(0,V.b)(({article:n})=>{a.navigate(["/articles",n.slug])})),{functional:!0,dispatch:!1}),U=[{path:"",component:L,providers:[d,(0,i.oY)(y,E),(0,o.y3)(u)]}]}}]);